var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,o=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&a(e,r,t[r]);if(s)for(var r of s(t))i.call(t,r)&&a(e,r,t[r]);return e},h=(e,s)=>t(e,r(s));import{w as d,t as u,V as c,R as l,P as m,a as p,I as f,W as g,O as y,d as b,i as v,b as w,c as x,S,p as N,C as P,T as z,g as L,G as C,e as O,f as E,L as k,h as _,o as M,M as j,B as R,j as I,k as A,l as D,m as B,n as F,D as G,q as T,r as U,s as $,u as q,v as H,x as V,y as W,z as X,A as Z,E as Y,F as K,H as J,J as Q,K as ee,N as te,Q as re,U as se,X as ne,Y as ie,Z as ae,_ as oe,$ as he,a0 as de,a1 as ue,a2 as ce,a3 as le,a4 as me,a5 as pe,a6 as fe,a7 as ge,a8 as ye,a9 as be,aa as ve,ab as we,ac as xe,ad as Se,ae as Ne,af as Pe,ag as ze,ah as Le,ai as Ce,aj as Oe,ak as Ee,al as ke,am as _e,an as Me,ao as je,ap as Re,aq as Ie,ar as Ae,as as De,at as Be,au as Fe,av as Ge,aw as Te,ax as Ue,ay as $e,az as qe,aA as He,aB as Ve}from"./vendor.43f87af6.js";function We(e,t,r){t instanceof Object&&Object.entries(t).forEach((([t,s])=>{r?r(e,t,s):e[t]=s}))}function Xe(e,t,r,s=!0,n){s&&We(r,e[t],n);const i=u(e,t);return d(i,(e=>{We(r,e,n)}))}function Ze(e,t){t instanceof Object&&Object.entries(t).forEach((([t,r])=>{e[t]=r}))}function Ye(e,t,r,s){const n=s||t,i=u(e,t);i.value instanceof Object?(Ze(r[n],i.value),d(i,(e=>{Ze(r[n],e)}),{deep:!0})):(void 0!==i.value&&(r[n]=e[t]),d(i,(e=>{r[n]=e})))}function Ke(e,t=[]){const r={};return Object.entries(e).forEach((([e,s])=>{t&&t.includes(e)||(r[e]=s)})),r}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function Je(e){const{camera:t,domElement:r,intersectObjects:s,intersectRecursive:n=!1,touch:i=!0,resetOnEnd:a=!1,onEnter:d=(()=>{}),onMove:u=(()=>{}),onLeave:g=(()=>{}),onClick:y=(()=>{}),onIntersectEnter:b=(()=>{}),onIntersectOver:v=(()=>{}),onIntersectMove:w=(()=>{}),onIntersectLeave:x=(()=>{}),onIntersectClick:S=(()=>{})}=e,N=new p(0,0),P=new p(0,0),z=function(e){const{camera:t,resetPosition:r=new c(0,0,0)}=e,s=new l,n=r.clone(),i=new m(new c(0,0,1),0);return{position:n,updatePosition:e=>{s.setFromCamera(e,t),t.getWorldDirection(i.normal),s.ray.intersectPlane(i,n)},intersect:(e,r,n=!1)=>(s.setFromCamera(e,t),s.intersectObjects(r,n))}}({camera:t}),L=z.position,C={position:N,positionN:P,positionV3:L,intersectObjects:s,listeners:!1,addListeners:function(){r.addEventListener("mouseenter",k),r.addEventListener("mousemove",_),r.addEventListener("mouseleave",j),r.addEventListener("click",M),i&&(r.addEventListener("touchstart",k),r.addEventListener("touchmove",_),r.addEventListener("touchend",j));C.listeners=!0},removeListeners:function(){r.removeEventListener("mouseenter",k),r.removeEventListener("mousemove",_),r.removeEventListener("mouseleave",j),r.removeEventListener("click",M),r.removeEventListener("touchstart",k),r.removeEventListener("touchmove",_),r.removeEventListener("touchend",j),C.listeners=!1},intersect:E};return C;function O(e){let t,s;e.touches&&e.touches.length>0?(t=e.touches[0].clientX,s=e.touches[0].clientY):(t=e.clientX,s=e.clientY);const n=r.getBoundingClientRect();N.x=t-n.left,N.y=s-n.top,P.x=N.x/n.width*2-1,P.y=-N.y/n.height*2+1,z.updatePosition(P)}function E(){const e=I();if(e.length){const t=z.intersect(P,e,n),r=[...e],s=[];t.forEach((e=>{var t,n,i;const{object:a}=e,d=R(a);if(a instanceof f){if(-1!==s.indexOf(a))return;s.push(a)}if(!a.userData.over){a.userData.over=!0;const r={type:"pointerover",over:!0,component:d,intersect:e},s=h(o({},r),{type:"pointerenter"});v(r),b(s),null==(t=null==d?void 0:d.onPointerOver)||t.call(d,r),null==(n=null==d?void 0:d.onPointerEnter)||n.call(d,s)}const u={type:"pointermove",component:d,intersect:e};w(u),null==(i=null==d?void 0:d.onPointerMove)||i.call(d,u),r.splice(r.indexOf(a),1)})),r.forEach((e=>{var t,r;const s=R(e);if(e.userData.over){e.userData.over=!1;const n={type:"pointerover",over:!1,component:s},i=h(o({},n),{type:"pointerleave"});v(n),x(i),null==(t=null==s?void 0:s.onPointerOver)||t.call(s,n),null==(r=null==s?void 0:s.onPointerLeave)||r.call(s,i)}}))}}function k(e){O(e),d({type:"pointerenter",position:N,positionN:P,positionV3:L})}function _(e){O(e),u({type:"pointermove",position:N,positionN:P,positionV3:L}),E()}function M(e){O(e);const t=I();if(t.length){const e=z.intersect(P,t,n),r=[];e.forEach((e=>{var t;const{object:s}=e,n=R(s);if(s instanceof f){if(-1!==r.indexOf(s))return;r.push(s)}const i={type:"click",component:n,intersect:e};S(i),null==(t=null==n?void 0:n.onClick)||t.call(n,i)}))}y({type:"click",position:N,positionN:P,positionV3:L})}function j(){a&&(N.set(0,0),P.set(0,0),L.set(0,0,0)),g({type:"pointerleave"})}function R(e){if(e.userData.component)return e.userData.component;let t=e.parent;for(;t;){if(t.userData.component)return t.userData.component;t=t.parent}}function I(){return"function"==typeof s?s():s}}function Qe(e){const t={antialias:!0,alpha:!1,autoClear:!0,orbitCtrl:!1,pointer:!1,resize:!1,width:300,height:150};e&&Object.entries(e).forEach((([e,r])=>{t[e]=r}));const r={width:1,height:1,wWidth:1,wHeight:1,ratio:1},s=[],n=[],i=function(){const e=new g({canvas:t.canvas,antialias:t.antialias,alpha:t.alpha});return e.autoClear=t.autoClear,e}(),a={config:t,renderer:i,size:r,init:function(){if(!a.scene)return console.error("Missing Scene"),!1;if(!a.camera)return console.error("Missing Camera"),!1;t.resize?(u(),window.addEventListener("resize",u)):t.width&&t.height&&c(t.width,t.height);if(h(),t.orbitCtrl){const e=new y(a.camera,a.renderer.domElement);t.orbitCtrl instanceof Object&&Object.entries(t.orbitCtrl).forEach((([t,r])=>{e[t]=r})),d((()=>{e.update()})),a.cameraCtrl=e}return!0},dispose:function(){window.removeEventListener("resize",u),a.pointer&&a.pointer.removeListeners();a.cameraCtrl&&a.cameraCtrl.dispose();a.renderer&&a.renderer.dispose()},render:function(){s.forEach((e=>e())),a.renderer.render(a.scene,a.camera)},renderC:function(){s.forEach((e=>e())),a.composer.render()},setSize:c,addIntersectObject:function(e){-1===n.indexOf(e)&&n.push(e);a.pointer&&!a.pointer.listeners&&a.pointer.addListeners()},removeIntersectObject:function(e){const r=n.indexOf(e);-1!==r&&n.splice(r,1);a.pointer&&!t.pointer&&0===n.length&&a.pointer.removeListeners()}};return a;function h(){let e={camera:a.camera,domElement:a.renderer.domElement,intersectObjects:n};t.pointer&&t.pointer instanceof Object&&(e=o(o({},e),t.pointer));const r=a.pointer=Je(e);(t.pointer||n.length)&&(r.addListeners(),"frame"===e.intersectMode&&d(r.intersect))}function d(e){s.push(e)}function u(){var e;if("window"===t.resize)c(window.innerWidth,window.innerHeight);else{const e=a.renderer.domElement.parentNode;e&&c(e.clientWidth,e.clientHeight)}null==(e=t.onResize)||e.call(t,r)}function c(e,t){r.width=e,r.height=t,r.ratio=e/t,a.renderer.setSize(e,t,!1);const s=a.camera;if("PerspectiveCamera"===s.type){const e=s;e.aspect=r.ratio,e.updateProjectionMatrix()}if("OrthographicCamera"===s.type){const e=s;r.wWidth=e.right-e.left,r.wHeight=e.top-e.bottom}else{const e=function(){const e=a.camera,t=e.fov*Math.PI/180,r=2*Math.tan(t/2)*Math.abs(e.position.z);return[r*e.aspect,r]}();r.wWidth=e[0],r.wHeight=e[1]}}}const et=Symbol("Renderer");var tt=b({name:"Renderer",props:{antialias:Boolean,alpha:Boolean,autoClear:{type:Boolean,default:!0},orbitCtrl:{type:[Boolean,Object],default:!1},pointer:{type:[Boolean,Object],default:!1},resize:{type:[Boolean,String],default:!1},shadow:Boolean,width:String,height:String,xr:Boolean,props:{type:Object,default:()=>({})},onReady:Function},inheritAttrs:!1,setup(e,{attrs:t}){const r=document.createElement("canvas");Object.entries(t).forEach((([e,t])=>{const s=e.match(/^on([A-Z][a-zA-Z]*)$/);s?r.addEventListener(s[1].toLowerCase(),t):r.setAttribute(e,t)}));const s={canvas:r,antialias:e.antialias,alpha:e.alpha,autoClear:e.autoClear,orbitCtrl:e.orbitCtrl,pointer:e.pointer,resize:e.resize};e.width&&(s.width=parseInt(e.width)),e.height&&(s.height=parseInt(e.height));const n=Qe(s);Xe(e,"props",n.renderer);return{canvas:r,three:n,renderer:n.renderer,size:n.size,renderFn:()=>{},raf:!0,initCallbacks:[],mountedCallbacks:[],beforeRenderCallbacks:[],afterRenderCallbacks:[],resizeCallbacks:[]}},computed:{camera:{get:function(){return this.three.camera},set:function(e){this.three.camera=e}},scene:{get:function(){return this.three.scene},set:function(e){this.three.scene=e}},composer:{get:function(){return this.three.composer},set:function(e){this.three.composer=e}}},provide(){return{[et]:this}},mounted(){var e;this.$el.parentNode.insertBefore(this.canvas,this.$el),this.three.init()&&(this.three.pointer&&(this.$pointer=this.three.pointer),this.three.config.onResize=e=>{this.resizeCallbacks.forEach((t=>t({type:"resize",renderer:this,size:e})))},this.shadow&&(this.renderer.shadowMap.enabled=!0),this.renderFn=this.three.composer?this.three.renderC:this.three.render,this.initCallbacks.forEach((e=>e({type:"init",renderer:this}))),null==(e=this.onReady)||e.call(this,this),this.xr?(this.renderer.xr.enabled=!0,this.renderer.setAnimationLoop(this.render)):requestAnimationFrame(this.renderLoop)),this.mountedCallbacks.forEach((e=>e({type:"mounted",renderer:this})))},beforeUnmount(){this.canvas.remove(),this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[],this.raf=!1,this.three.dispose()},methods:{onInit(e){this.addListener("init",e)},onMounted(e){this.addListener("mounted",e)},onBeforeRender(e){this.addListener("beforerender",e)},offBeforeRender(e){this.removeListener("beforerender",e)},onAfterRender(e){this.addListener("afterrender",e)},offAfterRender(e){this.removeListener("afterrender",e)},onResize(e){this.addListener("resize",e)},offResize(e){this.removeListener("resize",e)},addListener(e,t){this.getCallbacks(e).push(t)},removeListener(e,t){const r=this.getCallbacks(e),s=r.indexOf(t);-1!==s&&r.splice(s,1)},getCallbacks(e){return"init"===e?this.initCallbacks:"mounted"===e?this.mountedCallbacks:"beforerender"===e?this.beforeRenderCallbacks:"afterrender"===e?this.afterRenderCallbacks:this.resizeCallbacks},render(e){this.beforeRenderCallbacks.forEach((t=>t({type:"beforerender",renderer:this,time:e}))),this.renderFn({renderer:this,time:e}),this.afterRenderCallbacks.forEach((t=>t({type:"afterrender",renderer:this,time:e})))},renderLoop(e){this.raf&&requestAnimationFrame(this.renderLoop),this.render(e)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Renderer"}),rt=b({props:{props:{type:Object,default:()=>({})}},render(){return this.$slots.default?this.$slots.default():[]}});function st(e,t,r,s=!0){e[t]=r,s&&e.updateProjectionMatrix()}b({extends:rt,name:"OrthographicCamera",props:{left:{type:Number,default:-1},right:{type:Number,default:1},top:{type:Number,default:1},bottom:{type:Number,default:-1},near:{type:Number,default:.1},far:{type:Number,default:2e3},zoom:{type:Number,default:1},position:{type:Object,default:()=>({x:0,y:0,z:0})}},setup(e){const t=v(et);if(!t)return void console.error("Renderer not found");const r=new w(e.left,e.right,e.top,e.bottom,e.near,e.far);return t.camera=r,Ye(e,"position",r),Xe(e,"props",r,!0,st),["left","right","top","bottom","near","far","zoom"].forEach((t=>{d((()=>e[t]),(e=>{st(r,t,e)}))})),{renderer:t,camera:r}},__hmrId:"OrthographicCamera"});var nt=b({extends:rt,name:"PerspectiveCamera",props:{aspect:{type:Number,default:1},far:{type:Number,default:2e3},fov:{type:Number,default:50},near:{type:Number,default:.1},position:{type:Object,default:()=>({x:0,y:0,z:0})},lookAt:{type:Object,default:null}},setup(e){var t;const r=v(et);if(!r)return void console.error("Renderer not found");const s=new x(e.fov,e.aspect,e.near,e.far);return r.camera=s,Ye(e,"position",s),e.lookAt&&s.lookAt(null!=(t=e.lookAt.x)?t:0,e.lookAt.y,e.lookAt.z),d((()=>e.lookAt),(e=>{var t;s.lookAt(null!=(t=e.x)?t:0,e.y,e.z)}),{deep:!0}),Xe(e,"props",s,!0,st),["aspect","far","fov","near"].forEach((t=>{d((()=>e[t]),(e=>{st(s,t,e)}))})),{renderer:r,camera:s}},__hmrId:"PerspectiveCamera"});const it=Symbol("Scene");var at=b({name:"Scene",props:{background:[String,Number,Object]},setup(e){const t=v(et),r=new S;if(!t)return void console.error("Renderer not found");t.scene=r,N(it,r);const s=e=>{e&&("string"==typeof e||"number"==typeof e?r.background instanceof P?r.background.set(e):r.background=new P(e):e instanceof z&&(r.background=e))};s(e.background),d((()=>e.background),s);return{scene:r,add:e=>{r.add(e)},remove:e=>{r.remove(e)}}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Scene"});var ot=b({name:"Object3D",inject:{renderer:et,scene:it},emits:["created","ready"],props:o({position:{type:Object,default:()=>({x:0,y:0,z:0})},rotation:{type:Object,default:()=>({x:0,y:0,z:0})},scale:{type:Object,default:()=>({x:1,y:1,z:1,order:"XYZ"})},lookAt:{type:Object,default:null},userData:{type:Object,default:()=>({})},visible:{type:Boolean,default:!0},props:{type:Object,default:()=>({})},disableAdd:{type:Boolean,default:!1},disableRemove:{type:Boolean,default:!1}},{onPointerEnter:Function,onPointerOver:Function,onPointerMove:Function,onPointerLeave:Function,onPointerDown:Function,onPointerUp:Function,onClick:Function}),setup:()=>({}),created(){this.renderer||console.error("Missing parent Renderer"),this.scene||console.error("Missing parent Scene")},unmounted(){this.disableRemove||this.removeFromParent(),this.o3d&&this.renderer&&this.renderer.three.removeIntersectObject(this.o3d)},methods:{initObject3D(e){var t;this.o3d=e,e.userData.component=this,(this.onPointerEnter||this.onPointerOver||this.onPointerMove||this.onPointerLeave||this.onPointerDown||this.onPointerUp||this.onClick)&&this.renderer&&this.renderer.three.addIntersectObject(e),Ye(this,"position",e),Ye(this,"rotation",e),Ye(this,"scale",e),Ye(this,"userData",e.userData),Ye(this,"visible",e),Xe(this,"props",e),this.$emit("created",e),this.lookAt&&e.lookAt(null!=(t=this.lookAt.x)?t:0,this.lookAt.y,this.lookAt.z),d((()=>this.lookAt),(t=>{var r;e.lookAt(null!=(r=t.x)?r:0,t.y,t.z)}),{deep:!0}),this.parent=this.getParent(),this.disableAdd||(this.addToParent()?this.$emit("ready",this):console.error("Missing parent (Scene, Group...)"))},getParent(){let e=this.$parent;if(!e){const t=L();t&&t.parent&&(e=t.parent.ctx)}for(;e;){if(e.add)return e;e=e.$parent}},addToParent(e){const t=e||this.o3d;return!!this.parent&&(this.parent.add(t),!0)},removeFromParent(e){const t=e||this.o3d;return!!this.parent&&(this.parent.remove(t),!0)},add(e){var t;null==(t=this.o3d)||t.add(e)},remove(e){var t;null==(t=this.o3d)||t.remove(e)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Object3D"});b({name:"Group",extends:ot,setup:()=>({group:new C}),created(){this.initObject3D(this.group)},__hmrId:"Group"});const ht=()=>{};b({name:"Raycaster",props:{onPointerEnter:{type:Function,default:ht},onPointerOver:{type:Function,default:ht},onPointerMove:{type:Function,default:ht},onPointerLeave:{type:Function,default:ht},onClick:{type:Function,default:ht},intersectMode:{type:String,default:"move"},intersectRecursive:{type:Boolean,default:!1}},setup:()=>({renderer:v(et)}),mounted(){if(!this.renderer)return void console.error("Renderer not found");const e=this.renderer;this.renderer.onMounted((()=>{e.camera&&(this.pointer=Je({camera:e.camera,domElement:e.canvas,intersectObjects:()=>e.scene?e.scene.children:[],intersectRecursive:this.intersectRecursive,onIntersectEnter:this.onPointerEnter,onIntersectOver:this.onPointerOver,onIntersectMove:this.onPointerMove,onIntersectLeave:this.onPointerLeave,onIntersectClick:this.onClick}),this.pointer.addListeners(),"frame"===this.intersectMode&&e.onBeforeRender(this.pointer.intersect))}))},unmounted(){var e;this.pointer&&(this.pointer.removeListeners(),null==(e=this.renderer)||e.offBeforeRender(this.pointer.intersect))},render:()=>[],__hmrId:"Raycaster"}),b({extends:ot,props:{cubeRTSize:{type:Number,default:256},cubeCameraNear:{type:Number,default:.1},cubeCameraFar:{type:Number,default:2e3},autoUpdate:Boolean,hideMeshes:{type:Array,default:()=>[]}},setup(e){const t=v(et);if(!t||!t.scene)return console.error("Missing Renderer / Scene"),{};const r=t.renderer,s=t.scene,n=new O(e.cubeRTSize,{format:E,generateMipmaps:!0,minFilter:k}),i=new _(e.cubeCameraNear,e.cubeCameraFar,n),a=()=>{e.hideMeshes.forEach((e=>{e.visible=!1})),i.update(r,s),e.hideMeshes.forEach((e=>{e.visible=!0}))};return e.autoUpdate?(t.onBeforeRender(a),M((()=>{t.offBeforeRender(a)}))):t.onMounted(a),{cubeRT:n,cubeCamera:i,updateRT:a}},created(){this.cubeCamera&&this.initObject3D(this.cubeCamera)},render:()=>[],__hmrId:"CubeCamera"});const dt=Symbol("Mesh"),ut=b({name:"Mesh",extends:ot,props:{castShadow:Boolean,receiveShadow:Boolean},setup:()=>({}),provide(){return{[dt]:this}},mounted(){this.mesh||this.loading||this.initMesh()},methods:{initMesh(){const e=new j(this.geometry,this.material);Ye(this,"castShadow",e),Ye(this,"receiveShadow",e),this.mesh=e,this.initObject3D(e)},createGeometry(){},addGeometryWatchers(e){Object.keys(e).forEach((e=>{d((()=>this[e]),(()=>{this.refreshGeometry()}))}))},setGeometry(e){this.geometry=e,this.mesh&&(this.mesh.geometry=e)},setMaterial(e){this.material=e,this.mesh&&(this.mesh.material=e)},refreshGeometry(){const e=this.geometry;this.createGeometry(),this.mesh&&this.geometry&&(this.mesh.geometry=this.geometry),null==e||e.dispose()}},unmounted(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose()},__hmrId:"Mesh"});function ct(e,t,r){return b({name:e,extends:ut,props:t,created(){this.createGeometry(),this.addGeometryWatchers(t)},methods:{createGeometry(){this.geometry=r(this)}}})}const lt=b({props:{rotateX:Number,rotateY:Number,rotateZ:Number,attributes:{type:Array,default:()=>[]}},inject:{mesh:dt},setup:()=>({}),created(){this.mesh?(this.createGeometry(),this.rotateGeometry(),this.geometry&&this.mesh.setGeometry(this.geometry),Object.keys(this.$props).forEach((e=>{d((()=>this[e]),this.refreshGeometry)}))):console.error("Missing parent Mesh")},unmounted(){var e;null==(e=this.geometry)||e.dispose()},methods:{createGeometry(){const e={},t=new R;this.attributes.forEach((r=>{if(r.name&&r.itemSize&&r.array){const s=e[r.name]=new I(r.array,r.itemSize,r.normalized);t.setAttribute(r.name,s)}})),t.computeBoundingBox(),this.geometry=t},rotateGeometry(){this.geometry&&(this.rotateX&&this.geometry.rotateX(this.rotateX),this.rotateY&&this.geometry.rotateY(this.rotateY),this.rotateZ&&this.geometry.rotateZ(this.rotateZ))},refreshGeometry(){const e=this.geometry;this.createGeometry(),this.rotateGeometry(),this.geometry&&this.mesh&&this.mesh.setGeometry(this.geometry),null==e||e.dispose()}},render:()=>[]});function mt(e,t,r){return b({name:e,extends:lt,props:t,methods:{createGeometry(){this.geometry=r(this)}}})}const pt={size:Number,width:{type:Number,default:1},height:{type:Number,default:1},depth:{type:Number,default:1},widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1},depthSegments:{type:Number,default:1}};function ft(e){return e.size?new A(e.size,e.size,e.size,e.widthSegments,e.heightSegments,e.depthSegments):new A(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}mt("BoxGeometry",pt,ft);const gt={radius:{type:Number,default:1},segments:{type:Number,default:8},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:2*Math.PI}};function yt(e){return new D(e.radius,e.segments,e.thetaStart,e.thetaLength)}mt("CircleGeometry",gt,yt);const bt={radius:{type:Number,default:1},height:{type:Number,default:1},radialSegments:{type:Number,default:8},heightSegments:{type:Number,default:1},openEnded:{type:Boolean,default:!1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:2*Math.PI}};function vt(e){return new B(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}mt("ConeGeometry",bt,vt);const wt={radiusTop:{type:Number,default:1},radiusBottom:{type:Number,default:1},height:{type:Number,default:1},radialSegments:{type:Number,default:8},heightSegments:{type:Number,default:1},openEnded:{type:Boolean,default:!1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:2*Math.PI}};function xt(e){return new F(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}mt("CylinderGeometry",wt,xt);const St={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Nt(e){return new G(e.radius,e.detail)}mt("DodecahedronGeometry",St,Nt);const Pt={radius:{type:Number,default:1},detail:{type:Number,default:0}};function zt(e){return new T(e.radius,e.detail)}mt("IcosahedronGeometry",Pt,zt);const Lt={points:Array,segments:{type:Number,default:12},phiStart:{type:Number,default:0},phiLength:{type:Number,default:2*Math.PI}};function Ct(e){return new U(e.points,e.segments,e.phiStart,e.phiLength)}mt("LatheGeometry",Lt,Ct);const Ot={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Et(e){return new $(e.radius,e.detail)}mt("OctahedronGeometry",Ot,Et);const kt={width:{type:Number,default:1},height:{type:Number,default:1},widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1}};function _t(e){return new q(e.width,e.height,e.widthSegments,e.heightSegments)}mt("PlaneGeometry",kt,_t);const Mt={vertices:Array,indices:Array,radius:{type:Number,default:1},detail:{type:Number,default:0}};function jt(e){return new H(e.vertices,e.indices,e.radius,e.detail)}mt("PolyhedronGeometry",Mt,jt);const Rt={innerRadius:{type:Number,default:.5},outerRadius:{type:Number,default:1},thetaSegments:{type:Number,default:8},phiSegments:{type:Number,default:1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:2*Math.PI}};function It(e){return new V(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}mt("RingGeometry",Rt,It);const At={radius:{type:Number,default:1},widthSegments:{type:Number,default:12},heightSegments:{type:Number,default:12}};function Dt(e){return new W(e.radius,e.widthSegments,e.heightSegments)}mt("SphereGeometry",At,Dt);const Bt={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Ft(e){return new X(e.radius,e.detail)}mt("TetrahedronGeometry",Bt,Ft);const Gt={radius:{type:Number,default:1},tube:{type:Number,default:.4},radialSegments:{type:Number,default:8},tubularSegments:{type:Number,default:6},arc:{type:Number,default:2*Math.PI}};function Tt(e){return new Z(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}mt("TorusGeometry",Gt,Tt);const Ut={radius:{type:Number,default:1},tube:{type:Number,default:.4},tubularSegments:{type:Number,default:64},radialSegments:{type:Number,default:8},p:{type:Number,default:2},q:{type:Number,default:3}};function $t(e){return new Y(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}mt("TorusKnotGeometry",Ut,$t);const qt={points:Array,path:Q,tubularSegments:{type:Number,default:64},radius:{type:Number,default:1},radialSegments:{type:Number,default:8},closed:{type:Boolean,default:!1}};function Ht(e){let t;return e.points?t=new J(e.points):e.path?t=e.path:console.error("Missing path curve or points."),new K(t,e.tubularSegments,e.radius,e.radiusSegments,e.closed)}function Vt(e,t){const r=new J(t),{radialSegments:s,radius:n,tubularSegments:i,closed:a}=e.parameters,o=r.computeFrenetFrames(i,a);e.tangents=o.tangents,e.normals=o.normals,e.binormals=o.binormals,e.parameters.path=r;const h=e.getAttribute("position"),d=e.getAttribute("normal"),u=new c,l=new c;for(let c=0;c<i;c++)m(c);function m(e){r.getPointAt(e/i,l);const t=o.normals[e],a=o.binormals[e];for(let r=0;r<=s;r++){const i=r/s*Math.PI*2,o=Math.sin(i),c=-Math.cos(i);u.x=c*t.x+o*a.x,u.y=c*t.y+o*a.y,u.z=c*t.z+o*a.z,u.normalize();const m=e*(s+1)+r;d.setXYZ(m,u.x,u.y,u.z),h.setXYZ(m,l.x+n*u.x,l.y+n*u.y,l.z+n*u.z)}}m(i),e.attributes.position.needsUpdate=!0,e.attributes.normal.needsUpdate=!0}b({extends:lt,props:qt,methods:{createGeometry(){this.geometry=Ht(this)},updatePoints(e){Vt(this.geometry,e)}}});var Wt=b({extends:ot,name:"Light",props:{color:{type:String,default:"#ffffff"},intensity:{type:Number,default:1},castShadow:{type:Boolean,default:!1},shadowMapSize:{type:Object,default:()=>({x:512,y:512})},shadowCamera:{type:Object,default:()=>({})}},setup:()=>({}),unmounted(){(this.light instanceof ee||this.light instanceof te)&&this.removeFromParent(this.light.target)},methods:{initLight(e){this.light=e,e.shadow&&(e.castShadow=this.castShadow,Ze(e.shadow.mapSize,this.shadowMapSize),Ze(e.shadow.camera,this.shadowCamera)),["color","intensity","castShadow"].forEach((t=>{d((()=>this[t]),(r=>{"color"===t?e.color.set(r):e[t]=r}))})),this.initObject3D(e),(e instanceof ee||e instanceof te)&&(Ye(this,"target",e.target,"position"),this.addToParent(e.target))}},__hmrId:"Light"});b({extends:Wt,created(){this.initLight(new re(this.color,this.intensity))},__hmrId:"AmbientLight"}),b({extends:Wt,props:{target:{type:Object,default:()=>({x:0,y:0,z:0})}},created(){this.initLight(new te(this.color,this.intensity))},__hmrId:"DirectionalLight"}),b({extends:Wt,props:{groundColor:{type:String,default:"#444444"}},created(){const e=new se(this.color,this.groundColor,this.intensity);d((()=>this.groundColor),(t=>{e.groundColor.set(t)})),this.initLight(e)},__hmrId:"HemisphereLight"});var Xt=b({extends:Wt,props:{distance:{type:Number,default:0},decay:{type:Number,default:1}},created(){this.initLight(new ne(this.color,this.intensity,this.distance,this.decay))},__hmrId:"PointLight"});b({extends:Wt,props:{width:{type:Number,default:10},height:{type:Number,default:10},helper:Boolean},created(){ie.init();const e=new ae(this.color,this.intensity,this.width,this.height);if(["width","height"].forEach((t=>{d((()=>this[t]),(r=>{e[t]=r}))})),this.helper){const t=new oe(e);e.add(t)}this.initLight(e)},__hmrId:"RectAreaLight"}),b({extends:Wt,props:{angle:{type:Number,default:Math.PI/3},decay:{type:Number,default:1},distance:{type:Number,default:0},penumbra:{type:Number,default:0},target:Object},created(){const e=new ee(this.color,this.intensity,this.distance,this.angle,this.penumbra,this.decay);["angle","decay","distance","penumbra"].forEach((t=>{d((()=>this[t]),(r=>{e[t]=r}))})),this.initLight(e)},__hmrId:"SpotLight"});const Zt=Symbol("Material"),Yt=b({props:{color:{type:String,default:"#ffffff"},props:{type:Object,default:()=>({})}},inject:{mesh:dt},setup:()=>({}),provide(){return{[Zt]:this}},created(){if(this.mesh){if(this.createMaterial){const e=this.material=this.createMaterial();d((()=>this.color),(t=>{e.color.set(t)})),Xe(this,"props",e,!1,this.setProp),this.mesh.setMaterial(e)}}else console.error("Missing parent Mesh")},unmounted(){var e;null==(e=this.material)||e.dispose()},methods:{getMaterialParams(){return o(o({},Ke(this.$props,["props"])),this.props)},setProp(e,t,r,s=!1){const n=e[t];n instanceof P?n.set(r):e[t]=r,e.needsUpdate=s},setTexture(e,t="map"){this.setProp(this.material,t,e,!0)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Material"});function Kt(e,t,r){return b({name:e,extends:Yt,props:t,methods:{createMaterial(){return r(this.getMaterialParams())}}})}Kt("BasicMaterial",{props:{type:Object,default:()=>({})}},(e=>new pe(e)));const Jt=Kt("LambertMaterial",{props:{type:Object,default:()=>({})}},(e=>new he(e)));Kt("PhongMaterial",{props:{type:Object,default:()=>({})}},(e=>new de(e))),Kt("PhysicalMaterial",{props:{type:Object,default:()=>({})}},(e=>new ue(e))),Kt("PointsMaterial",{props:{type:Object,default:()=>({})}},(e=>new ce(e))),Kt("StandardMaterial",{props:{type:Object,default:()=>({})}},(e=>new le(e))),Kt("ToonMaterial",{props:{type:Object,default:()=>({})}},(e=>new me(e))),Kt("MatcapMaterial",{src:String,name:{type:String,default:"0404E8_0404B5_0404CB_3333FC"}},(e=>{const t=e.src?e.src:function(e="0404E8_0404B5_0404CB_3333FC",t=1024){return`https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d/${t}/${e}${function(e){switch(e){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}(t)}.png`}(e.name),r=Ke(e,["src","name"]);return r.matcap=(new fe).load(t),new ge(r)}));Kt("ShaderMaterial",{props:{type:Object,default:()=>({uniforms:{},vertexShader:"\n  varying vec2 vUv;\n  void main(){\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n  }\n",fragmentShader:"\n  varying vec2 vUv;\n  void main() {\n    gl_FragColor = vec4(vUv.x, vUv.y, 0., 1.0);\n  }\n"})}},(e=>new ye(Ke(e,["color"]))));const Qt=be.meshphong_frag.slice(0,be.meshphong_frag.indexOf("void main() {")),er=be.meshphong_frag.slice(be.meshphong_frag.indexOf("void main() {")),tr={uniforms:ve.merge([we.phong.uniforms,{thicknessColor:{value:new P(16777215)},thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}}]),vertexShader:`\n    #define USE_UV\n    ${be.meshphong_vert}\n  `,fragmentShader:`\n    #define USE_UV\n    #define SUBSURFACE\n\n    ${Qt}\n\n    uniform float thicknessPower;\n    uniform float thicknessScale;\n    uniform float thicknessDistortion;\n    uniform float thicknessAmbient;\n    uniform float thicknessAttenuation;\n    uniform vec3 thicknessColor;\n\n    void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in GeometricContext geometry, inout ReflectedLight reflectedLight) {\n      #ifdef USE_COLOR\n        vec3 thickness = vColor * thicknessColor;\n      #else\n        vec3 thickness = thicknessColor;\n      #endif\n      vec3 scatteringHalf = normalize(directLight.direction + (geometry.normal * thicknessDistortion));\n      float scatteringDot = pow(saturate(dot(geometry.viewDir, -scatteringHalf)), thicknessPower) * thicknessScale;\n      vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;\n      reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;\n    }\n  `+er.replace("#include <lights_fragment_begin>",(rr=be.lights_fragment_begin,sr="RE_Direct( directLight, geometry, material, reflectedLight );",nr="\n        RE_Direct( directLight, geometry, material, reflectedLight );\n        #if defined( SUBSURFACE ) && defined( USE_UV )\n          RE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);\n        #endif\n      ",rr.split(sr).join(nr)))};var rr,sr,nr;b({extends:Yt,props:{uniforms:{type:Object,default:()=>({diffuse:"#ffffff",thicknessColor:"#ffffff",thicknessDistortion:.4,thicknessAmbient:.01,thicknessAttenuation:.7,thicknessPower:2,thicknessScale:4})}},methods:{createMaterial(){const e=tr,t=ve.clone(e.uniforms);Xe(this,"uniforms",t,!0,((e,t,r)=>{const s=e[t].value;s instanceof P?s.set(r):e[t].value=r}));return new ye(h(o(h(o({},e),{lights:!0}),this.props),{uniforms:t}))}}});var ir=b({inject:{material:Zt},props:{name:{type:String,default:"map"},uniform:String,src:String,onLoad:Function,onProgress:Function,onError:Function,props:{type:Object,default:()=>({})}},setup:()=>({}),created(){this.refreshTexture(),d((()=>this.src),this.refreshTexture)},unmounted(){var e,t;null==(e=this.material)||e.setTexture(null,this.name),null==(t=this.texture)||t.dispose()},methods:{createTexture(){if(this.src)return(new fe).load(this.src,this.onLoaded,this.onProgress,this.onError)},initTexture(){this.texture&&(Xe(this,"props",this.texture),this.material&&(this.material.setTexture(this.texture,this.name),this.material.material instanceof ye&&this.uniform&&(this.material.material.uniforms[this.uniform]={value:this.texture})))},refreshTexture(){var e;null==(e=this.texture)||e.dispose(),this.texture=this.createTexture(),this.initTexture()},onLoaded(e){var t;null==(t=this.onLoad)||t.call(this,e)}},render:()=>[]});b({extends:ir,props:{name:{type:String,default:"envMap"},path:{type:String,required:!0},urls:{type:Array,default:()=>["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"]},props:{type:Object,default:()=>({mapping:xe})}},created(){d((()=>this.path),this.refreshTexture),d((()=>this.urls),this.refreshTexture)},methods:{createTexture(){return(new Se).setPath(this.path).load(this.urls,this.onLoaded,this.onProgress,this.onError)}}});var ar=ct("Box",pt,ft);ct("Circle",gt,yt),ct("Cone",bt,vt),ct("Cylinder",wt,xt),ct("Dodecahedron",St,Nt),ct("Icosahedron",Pt,zt),ct("Lathe",Lt,Ct),ct("Octahedron",Ot,Et),ct("Plane",kt,_t),ct("Polyhedron",Mt,jt),ct("Ring",Rt,It),ct("Sphere",At,Dt),ct("Tetrahedron",Bt,Ft);const or={text:{type:String,required:!0,default:"Text"},fontSrc:{type:String,required:!0},size:{type:Number,default:80},height:{type:Number,default:5},depth:{type:Number,default:1},curveSegments:{type:Number,default:12},bevelEnabled:{type:Boolean,default:!1},bevelThickness:{type:Number,default:10},bevelSize:{type:Number,default:8},bevelOffset:{type:Number,default:0},bevelSegments:{type:Number,default:5},align:{type:[Boolean,String],default:!1}};b({extends:ut,props:or,setup:()=>({}),created(){if(!this.fontSrc)return void console.error('Missing required prop: "font-src"');["text","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","align"].forEach((e=>{d((()=>this[e]),(()=>{this.font&&this.refreshGeometry()}))}));const e=new Ne;this.loading=!0,e.load(this.fontSrc,(e=>{this.loading=!1,this.font=e,this.createGeometry(),this.initMesh()}))},methods:{createGeometry(){this.geometry=new Pe(this.text,{font:this.font,size:this.size,height:this.height,depth:this.depth,curveSegments:this.curveSegments,bevelEnabled:this.bevelEnabled,bevelThickness:this.bevelThickness,bevelSize:this.bevelSize,bevelOffset:this.bevelOffset,bevelSegments:this.bevelSegments}),"center"===this.align&&this.geometry.center()}}}),ct("Torus",Gt,Tt),ct("TorusKnot",Ut,$t),b({extends:ut,props:qt,created(){this.createGeometry(),this.addGeometryWatchers(qt)},methods:{createGeometry(){this.geometry=Ht(this)},updatePoints(e){Vt(this.geometry,e)}},__hmrId:"Tube"}),b({emits:["loaded"],extends:ut,props:{src:{type:String,required:!0},width:Number,height:Number,widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1},keepSize:Boolean},setup:()=>({}),created(){this.renderer&&(this.geometry=new q(1,1,this.widthSegments,this.heightSegments),this.material=new pe({side:ze,map:this.loadTexture()}),d((()=>this.src),this.refreshTexture),["width","height"].forEach((e=>{d((()=>this[e]),this.resize)})),this.resize(),this.keepSize&&this.renderer.onResize(this.resize))},unmounted(){var e;null==(e=this.renderer)||e.offResize(this.resize)},methods:{loadTexture(){return(new fe).load(this.src,this.onLoaded)},refreshTexture(){var e;null==(e=this.texture)||e.dispose(),this.material&&(this.material.map=this.loadTexture(),this.material.needsUpdate=!0)},onLoaded(e){this.texture=e,this.resize(),this.$emit("loaded",e)},resize(){if(!this.renderer||!this.texture)return;const e=this.renderer.size,t=this.texture.image.width/this.texture.image.height;let r=1,s=1;this.width&&this.height?(r=this.width*e.wWidth/e.width,s=this.height*e.wHeight/e.height):this.width?(r=this.width*e.wWidth/e.width,s=r/t):this.height?(s=this.height*e.wHeight/e.height,r=s*t):t>1?r=s*t:s=r/t,this.mesh&&(this.mesh.scale.x=r,this.mesh.scale.y=s)}},__hmrId:"Image"}),b({extends:ut,props:{count:{type:Number,required:!0}},methods:{initMesh(){if(this.renderer){if(!this.geometry||!this.material)return console.error("Missing geometry and/or material"),!1;this.mesh=new f(this.geometry,this.material,this.count),this.mesh.userData.component=this,Ye(this,"castShadow",this.mesh),Ye(this,"receiveShadow",this.mesh),(this.onPointerEnter||this.onPointerOver||this.onPointerMove||this.onPointerLeave||this.onPointerDown||this.onPointerUp||this.onClick)&&this.renderer.three.addIntersectObject(this.mesh),this.initObject3D(this.mesh)}}},__hmrId:"InstancedMesh"}),b({extends:ot,emits:["loaded"],props:{src:{type:String,required:!0}},setup:()=>({}),created(){this.texture=(new fe).load(this.src,this.onLoaded),this.material=new Le({map:this.texture}),this.sprite=new Ce(this.material),this.initObject3D(this.sprite)},unmounted(){var e,t;null==(e=this.texture)||e.dispose(),null==(t=this.material)||t.dispose()},methods:{onLoaded(){this.updateUV(),this.$emit("loaded")},updateUV(){if(!this.texture||!this.sprite)return;const e=this.texture.image.width/this.texture.image.height;let t=.5,r=.5;e>1?t=.5*e:r=.5/e;const s=this.sprite.geometry.attributes.position.array;s[0]=-t,s[1]=-r,s[5]=t,s[6]=-r,s[10]=t,s[11]=r,s[15]=-t,s[16]=r,this.sprite.geometry.attributes.position.needsUpdate=!0}},__hmrId:"Sprite"}),b({extends:ot,setup:()=>({}),provide(){return{[dt]:this}},mounted(){this.mesh=this.points=new Oe(this.geometry,this.material),this.initObject3D(this.mesh)},methods:{setGeometry(e){this.geometry=e,this.mesh&&(this.mesh.geometry=e)},setMaterial(e){this.material=e,this.mesh&&(this.mesh.material=e)}}});var hr=b({extends:ot,emits:["load","progress","error"],props:{src:{type:String,required:!0}},data:()=>({progress:0}),methods:{onLoad(e){this.$emit("load",e),this.initObject3D(e)},onProgress(e){this.progress=e.loaded/e.total,this.$emit("progress",e)},onError(e){this.$emit("error",e)}}});b({extends:hr,created(){(new Ee).load(this.src,(e=>{this.onLoad(e.scene),console.log("Console message")}),this.onProgress,this.onError)}}),b({extends:hr,created(){(new ke).load(this.src,(e=>{this.onLoad(e)}),this.onProgress,this.onError)}});const dr=Symbol("Composer");b({setup:()=>({renderer:v(et)}),provide(){return{[dr]:this}},created(){if(!this.renderer)return void console.error("Renderer not found");const e=this.renderer,t=new _e(this.renderer.renderer);this.composer=t,this.renderer.composer=t,e.addListener("init",(()=>{e.renderer.autoClear=!1,this.resize(),e.addListener("resize",this.resize)}))},unmounted(){var e;null==(e=this.renderer)||e.removeListener("resize",this.resize)},methods:{addPass(e){var t;null==(t=this.composer)||t.addPass(e)},removePass(e){var t;null==(t=this.composer)||t.removePass(e)},resize(){this.composer&&this.renderer&&this.composer.setSize(this.renderer.size.width,this.renderer.size.height)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"EffectComposer"});var ur=b({inject:{renderer:et,composer:dr},emits:["ready"],setup:()=>({}),created(){this.composer||console.error("Missing parent EffectComposer"),this.renderer||console.error("Missing parent Renderer")},unmounted(){var e,t,r;this.pass&&(null==(e=this.composer)||e.removePass(this.pass),null==(r=(t=this.pass).dispose)||r.call(t))},methods:{initEffectPass(e){var t;this.pass=e,null==(t=this.composer)||t.addPass(e),this.$emit("ready",e)}},render:()=>[],__hmrId:"EffectPass"});b({extends:ur,created(){if(!this.renderer)return;if(!this.renderer.scene)return void console.error("Missing Scene");if(!this.renderer.camera)return void console.error("Missing Camera");const e=new Me(this.renderer.scene,this.renderer.camera);this.initEffectPass(e)},__hmrId:"RenderPass"});const cr={focus:{type:Number,default:1},aperture:{type:Number,default:.025},maxblur:{type:Number,default:.01}};b({extends:ur,props:cr,created(){if(!this.renderer)return;if(!this.renderer.scene)return void console.error("Missing Scene");if(!this.renderer.camera)return void console.error("Missing Camera");const e={focus:this.focus,aperture:this.aperture,maxblur:this.maxblur,width:this.renderer.size.width,height:this.renderer.size.height},t=new je(this.renderer.scene,this.renderer.camera,e);Object.keys(cr).forEach((e=>{d((()=>this[e]),(r=>{t.uniforms[e].value=r}))})),this.initEffectPass(t)},__hmrId:"BokehPass"});const lr={noiseIntensity:{type:Number,default:.5},scanlinesIntensity:{type:Number,default:.05},scanlinesCount:{type:Number,default:4096},grayscale:{type:Number,default:0}};b({extends:ur,props:lr,created(){const e=new Re(this.noiseIntensity,this.scanlinesIntensity,this.scanlinesCount,this.grayscale);Object.keys(lr).forEach((t=>{d((()=>this[t]),(r=>{e.uniforms[t].value=r}))})),this.initEffectPass(e)},__hmrId:"FilmPass"}),b({extends:ur,created(){var e;const t=new Ie(Ae);null==(e=this.renderer)||e.addListener("resize",this.resize),this.initEffectPass(t)},unmounted(){var e;null==(e=this.renderer)||e.removeListener("resize",this.resize)},methods:{resize({size:e}){if(this.pass){const{resolution:t}=this.pass.material.uniforms;t.value.x=1/e.width,t.value.y=1/e.height}}},__hmrId:"FXAAPass"});const mr={shape:{type:Number,default:1},radius:{type:Number,default:4},rotateR:{type:Number,default:Math.PI/12*1},rotateG:{type:Number,default:Math.PI/12*2},rotateB:{type:Number,default:Math.PI/12*3},scatter:{type:Number,default:0}};b({extends:ur,props:mr,created(){if(!this.renderer)return;const e=new De(this.renderer.size.width,this.renderer.size.height,{});Object.keys(mr).forEach((t=>{e.uniforms[t].value=this[t],d((()=>this[t]),(r=>{e.uniforms[t].value=r}))})),this.initEffectPass(e)},__hmrId:"HalftonePass"}),b({extends:ur,created(){if(!this.renderer)return;const e=new Be(this.renderer.size.width,this.renderer.size.height);this.initEffectPass(e)},__hmrId:"SMAAPass"}),b({extends:ur,props:{options:{type:Object,default:()=>({})}},created(){if(!this.renderer)return;if(!this.renderer.scene)return void console.error("Missing Scene");if(!this.renderer.camera)return void console.error("Missing Camera");const e=new Fe(this.renderer.scene,this.renderer.camera,this.renderer.size.width,this.renderer.size.height);Object.keys(this.options).forEach((t=>{e[t]=this.options[t]})),this.initEffectPass(e)},__hmrId:"SSAOPass"});var pr={uniforms:{},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    varying vec2 vUv;\n    void main() {\n      gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n  "},fr={uniforms:{tDiffuse:{value:null},blurRadius:{value:0},gradientRadius:{value:0},start:{value:new p},end:{value:new p},delta:{value:new p},texSize:{value:new p}},vertexShader:pr.vertexShader,fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float blurRadius;\n    uniform float gradientRadius;\n    uniform vec2 start;\n    uniform vec2 end;\n    uniform vec2 delta;\n    uniform vec2 texSize;\n    varying vec2 vUv;\n\n    float random(vec3 scale, float seed) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n    }\n\n    void main() {\n      vec4 color = vec4(0.0);\n      float total = 0.0;\n\n      /* randomize the lookup values to hide the fixed number of samples */\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n      vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n      float radius = smoothstep(0.0, 1.0, abs(dot(vUv * texSize - start, normal)) / gradientRadius) * blurRadius;\n      for (float t = -30.0; t <= 30.0; t++) {\n          float percent = (t + offset - 0.5) / 30.0;\n          float weight = 1.0 - abs(percent);\n          vec4 texel = texture2D(tDiffuse, vUv + delta / texSize * percent * radius);\n          // vec4 texel2 = texture2D(tDiffuse, vUv + vec2(-delta.y, delta.x) / texSize * percent * radius);\n\n          /* switch to pre-multiplied alpha to correctly blur transparent images */\n          texel.rgb *= texel.a;\n          // texel2.rgb *= texel2.a;\n\n          color += texel * weight;\n          total += 2.0 * weight;\n      }\n\n      gl_FragColor = color / total;\n\n      /* switch back from pre-multiplied alpha */\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n    }\n  "};b({extends:ur,props:{blurRadius:{type:Number,default:10},gradientRadius:{type:Number,default:100},start:{type:Object,default:()=>({x:0,y:100})},end:{type:Object,default:()=>({x:10,y:100})}},setup:()=>({uniforms1:{},uniforms2:{}}),created(){if(!this.composer)return;this.pass1=new Ie(fr),this.pass2=new Ie(fr);const e=this.uniforms1=this.pass1.uniforms,t=this.uniforms2=this.pass2.uniforms;t.blurRadius=e.blurRadius,t.gradientRadius=e.gradientRadius,t.start=e.start,t.end=e.end,t.texSize=e.texSize,Ye(this,"blurRadius",e.blurRadius,"value"),Ye(this,"gradientRadius",e.gradientRadius,"value"),this.updateFocusLine(),["start","end"].forEach((e=>{d((()=>this[e]),this.updateFocusLine,{deep:!0})})),this.pass1.setSize=(t,r)=>{e.texSize.value.set(t,r)},this.initEffectPass(this.pass1),this.composer.addPass(this.pass2)},unmounted(){this.composer&&this.pass2&&this.composer.removePass(this.pass2)},methods:{updateFocusLine(){this.uniforms1.start.value.copy(this.start),this.uniforms1.end.value.copy(this.end);const e=(new p).copy(this.end).sub(this.start).normalize();this.uniforms1.delta.value.copy(e),this.uniforms2.delta.value.set(-e.y,e.x)}},__hmrId:"TiltShiftPass"});const gr={strength:{type:Number,default:1.5},radius:{type:Number,default:0},threshold:{type:Number,default:0}};b({extends:ur,props:gr,created(){if(!this.renderer)return;const e=new p(this.renderer.size.width,this.renderer.size.height),t=new Ge(e,this.strength,this.radius,this.threshold);Object.keys(gr).forEach((e=>{d((()=>this[e]),(r=>{t.uniforms[e].value=r}))})),this.initEffectPass(t)},__hmrId:"UnrealBloomPass"});var yr={uniforms:{tDiffuse:{value:null},center:{value:new p(.5,.5)},strength:{value:0}},vertexShader:pr.vertexShader,fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform vec2 center;\n    uniform float strength;\n    varying vec2 vUv;\n\n    float random(vec3 scale, float seed) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n    }\n    \n    void main() {\n      vec4 color = vec4(0.0);\n      float total = 0.0;\n      vec2 toCenter = center - vUv;\n      \n      /* randomize the lookup values to hide the fixed number of samples */\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n      \n      for (float t = 0.0; t <= 40.0; t++) {\n        float percent = (t + offset) / 40.0;\n        float weight = 4.0 * (percent - percent * percent);\n        vec4 texel = texture2D(tDiffuse, vUv + toCenter * percent * strength);\n\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\n        texel.rgb *= texel.a;\n\n        color += texel * weight;\n        total += weight;\n      }\n\n      gl_FragColor = color / total;\n\n      /* switch back from pre-multiplied alpha */\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n    }\n  "};b({extends:ur,props:{center:{type:Object,default:()=>({x:.5,y:.5})},strength:{type:Number,default:.5}},created(){const e=new Ie(yr);Ye(this,"center",e.uniforms.center,"value"),Ye(this,"strength",e.uniforms.strength,"value"),this.initEffectPass(e)},__hmrId:"ZoomBlurPass"});var br=b({components:{Box:ar,Camera:nt,LambertMaterial:Jt,PointLight:Xt,Renderer:tt,Scene:at},mounted(){const e=this.$refs.renderer,t=this.$refs.box.mesh;e&&t&&e.onBeforeRender((()=>{t.rotation.x+=.01}))}});br.render=function(e,t,r,s,n,i){const a=Te("Camera"),o=Te("PointLight"),h=Te("LambertMaterial"),d=Te("Box"),u=Te("Scene"),c=Te("Renderer");return qe(),Ue(c,{ref:"renderer",antialias:"","orbit-ctrl":{enableDamping:!0},resize:"window"},{default:$e((()=>[He(a,{position:{z:10}}),He(u,null,{default:$e((()=>[He(o,{position:{y:50,z:50}}),He(d,{size:1,ref:"box",rotation:{y:Math.PI/4,z:Math.PI/4}},{default:$e((()=>[He(h)])),_:1},8,["rotation"])])),_:1})])),_:1},512)};Ve(br).mount("#app");
